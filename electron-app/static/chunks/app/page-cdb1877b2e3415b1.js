(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x,oR:()=>u});var a=s(2115);let i=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(l);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8382:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(5155),i=s(2115),r=s(9434);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}var c=s(9708);let u=(0,s(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function x(e){let{className:t,variant:s,size:i,asChild:n=!1,...o}=e,d=n?c.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,r.cn)(u({variant:s,size:i,className:t})),...o})}function m(e){let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}var p=s(968);function h(e){let{className:t,...s}=e;return(0,a.jsx)(p.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}var g=s(7234),f=s(4416);function v(e){let{...t}=e;return(0,a.jsx)(g.bL,{"data-slot":"dialog",...t})}function j(e){let{...t}=e;return(0,a.jsx)(g.l9,{"data-slot":"dialog-trigger",...t})}function b(e){let{...t}=e;return(0,a.jsx)(g.ZL,{"data-slot":"dialog-portal",...t})}function y(e){let{className:t,...s}=e;return(0,a.jsx)(g.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function N(e){let{className:t,children:s,showCloseButton:i=!0,...n}=e;return(0,a.jsxs)(b,{"data-slot":"dialog-portal",children:[(0,a.jsx)(y,{}),(0,a.jsxs)(g.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,i&&(0,a.jsxs)(g.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(f.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function S(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function k(e){let{className:t,...s}=e;return(0,a.jsx)(g.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...s})}function w(e){let{className:t,...s}=e;return(0,a.jsx)(g.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}var A=s(7108),O=s(3109),T=s(8500),I=s(4616),D=s(3717),E=s(2525),_=s(7481);function C(){let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(!0),[c,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[f,b]=(0,i.useState)(null),[y,C]=(0,i.useState)({name:"",description:"",stock:0,price:0}),[P,z]=(0,i.useState)(0);(0,i.useEffect)(()=>{M()},[]);let M=async()=>{try{let e=await fetch("/api/products");if(e.ok){let s=await e.json();t(s)}else{let e=localStorage.getItem("inventory-products");if(e)t(JSON.parse(e));else{let e=[{id:"1",name:"Laptop Dell XPS 15",description:"Laptop de alto rendimiento con pantalla 4K",stock:5,price:1299.99,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",name:"Mouse Logitech MX Master 3",description:"Mouse ergon\xf3mico inal\xe1mbrico",stock:12,price:99.99,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",name:"Teclado mec\xe1nico RGB",description:"Teclado gaming con retroiluminaci\xf3n RGB",stock:8,price:149.99,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];t(e),localStorage.setItem("inventory-products",JSON.stringify(e))}}}catch(s){console.error("Error loading products:",s);let e=localStorage.getItem("inventory-products");e&&t(JSON.parse(e))}finally{r(!1)}},R=e=>{localStorage.setItem("inventory-products",JSON.stringify(e))},F=async()=>{if(!y.name.trim())return void(0,_.oR)({title:"Error",description:"El nombre del producto es requerido",variant:"destructive"});let s={id:Date.now().toString(),name:y.name,description:y.description,stock:y.stock,price:y.price,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(a.ok){let s=await a.json();t([...e,s])}else{let a=[...e,s];t(a),R(a)}}catch(i){let a=[...e,s];t(a),R(a)}C({name:"",description:"",stock:0,price:0}),u(!1),(0,_.oR)({title:"\xc9xito",description:"Producto creado exitosamente"})},L=async(s,a)=>{let i=e.find(e=>e.id===s);if(!i)return;let r=i.stock+a;if(r<0)return void(0,_.oR)({title:"Error",description:"No se puede tener stock negativo",variant:"destructive"});try{let i=await fetch("/api/products/".concat(s,"/stock"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a})});if(i.ok){let a=await i.json();t(e.map(e=>e.id===s?a:e))}else{let a=e.map(e=>e.id===s?{...e,stock:r,updatedAt:new Date().toISOString()}:e);t(a),R(a)}}catch(i){let a=e.map(e=>e.id===s?{...e,stock:r,updatedAt:new Date().toISOString()}:e);t(a),R(a)}(0,_.oR)({title:"\xc9xito",description:"Stock actualizado"})},J=async s=>{try{if((await fetch("/api/products/".concat(s),{method:"DELETE"})).ok)t(e.filter(e=>e.id!==s));else{let a=e.filter(e=>e.id!==s);t(a),R(a)}}catch(i){let a=e.filter(e=>e.id!==s);t(a),R(a)}(0,_.oR)({title:"\xc9xito",description:"Producto eliminado"})},U=e=>{b(e),z(0),g(!0)},X=e.length,G=e.reduce((e,t)=>e+t.stock,0),V=e.filter(e=>e.stock<5).length;return s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Cargando inventario..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sistema de Inventario"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Gestiona tu inventario de productos de manera sencilla"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(n,{children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d,{className:"text-sm font-medium",children:"Total Productos"}),(0,a.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(l,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:X})})]}),(0,a.jsxs)(n,{children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d,{className:"text-sm font-medium",children:"Total en Stock"}),(0,a.jsx)(O.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(l,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:G})})]}),(0,a.jsxs)(n,{children:[(0,a.jsxs)(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d,{className:"text-sm font-medium",children:"Stock Bajo"}),(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(l,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:V})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Lista de Productos"}),(0,a.jsxs)(v,{open:c,onOpenChange:u,children:[(0,a.jsx)(j,{asChild:!0,children:(0,a.jsxs)(x,{children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Nuevo Producto"]})}),(0,a.jsxs)(N,{children:[(0,a.jsxs)(S,{children:[(0,a.jsx)(k,{children:"Crear Nuevo Producto"}),(0,a.jsx)(w,{children:"Agrega un nuevo producto a tu inventario"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{htmlFor:"name",children:"Nombre del Producto"}),(0,a.jsx)(m,{id:"name",value:y.name,onChange:e=>C({...y,name:e.target.value}),placeholder:"Ej: Laptop Dell XPS 15"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{htmlFor:"description",children:"Descripci\xf3n"}),(0,a.jsx)(m,{id:"description",value:y.description,onChange:e=>C({...y,description:e.target.value}),placeholder:"Descripci\xf3n del producto"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{htmlFor:"stock",children:"Stock Inicial"}),(0,a.jsx)(m,{id:"stock",type:"number",value:y.stock,onChange:e=>C({...y,stock:parseInt(e.target.value)||0}),placeholder:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{htmlFor:"price",children:"Precio"}),(0,a.jsx)(m,{id:"price",type:"number",step:"0.01",value:y.price,onChange:e=>C({...y,price:parseFloat(e.target.value)||0}),placeholder:"0.00"})]})]}),(0,a.jsx)(x,{onClick:F,className:"w-full",children:"Crear Producto"})]})]})]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:0===e.length?(0,a.jsx)(n,{children:(0,a.jsx)(l,{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(A.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay productos"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Comienza agregando tu primer producto al inventario"})]})})}):e.map(e=>(0,a.jsx)(n,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Stock:"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(e.stock<5?"text-red-600":"text-green-600"),children:[e.stock," unidades"]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Precio:"}),(0,a.jsxs)("span",{className:"font-semibold",children:["$",e.price.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(v,{open:p&&(null==f?void 0:f.id)===e.id,onOpenChange:e=>{e||(g(!1),b(null))},children:[(0,a.jsx)(j,{asChild:!0,children:(0,a.jsx)(x,{variant:"outline",size:"sm",onClick:()=>U(e),children:(0,a.jsx)(D.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(N,{children:[(0,a.jsxs)(S,{children:[(0,a.jsxs)(k,{children:["Editar Stock - ",null==f?void 0:f.name]}),(0,a.jsx)(w,{children:"Ajusta la cantidad de stock para este producto"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(h,{children:["Stock Actual: ",null==f?void 0:f.stock]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{htmlFor:"adjustment",children:"Ajuste de Stock"}),(0,a.jsx)(m,{id:"adjustment",type:"number",value:P,onChange:e=>z(parseInt(e.target.value)||0),placeholder:"Usa n\xfameros positivos para agregar, negativos para restar"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Nuevo stock: ",f?Math.max(0,f.stock+P):0]}),(0,a.jsx)(x,{onClick:()=>{f&&(L(f.id,P),g(!1),b(null),z(0))},className:"w-full",children:"Actualizar Stock"})]})]})]}),(0,a.jsx)(x,{variant:"outline",size:"sm",onClick:()=>J(e.id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(E.A,{className:"h-4 w-4"})})]})]})})},e.id))})]})})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2596),i=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,a.$)(t))}},9518:(e,t,s)=>{Promise.resolve().then(s.bind(s,8382))}},e=>{var t=t=>e(e.s=t);e.O(0,[470,976,441,684,358],()=>t(9518)),_N_E=e.O()}]);